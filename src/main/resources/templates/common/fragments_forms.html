<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">

  <body>
  
  	<div
		th:fragment="post_options (post, crosspostFeedsMap, showCommentsAllowed, showPublishDate, isEdit)">
		<div class="form-group">
			<label>To Timeline:</label>
			<select name='group_id' class="form-control">
				<option value=''>Your own</option>
				<optgroup label="Communities">
				</optgroup>
				<optgroup label="Nutsterz Timelines" class="friends">
				</optgroup>
			</select>
		</div>
		<div class="form-group visibilityFields">
			<label>Privacy:</label>
			<div class="radio">
				<label><input tabindex='1' type='radio'
					th:field="*{visibility.visibilityType}" value='PRIVATE' /> Only Me</label>
			</div>
			<div class="radio">
				<label><input tabindex='1' type='radio'
					th:field="*{visibility.visibilityType}" value='ALL_FRIENDS' /> All Friends</label>
			</div>
			<div class="radio">
				<label><input tabindex='1' type='radio'
					th:field="*{visibility.visibilityType}" value='ALL_FOLLOWERS' /> All Followers</label>
			</div>
			
			<div class="radio">
				<label><input tabindex='1' type='radio'
					th:field="*{visibility.visibilityType}" value='ALL_USERS' /> All MixedNutz</label>
			</div>
			<div class="radio">
				<label><input tabindex='1' type='radio'
					th:field="*{visibility.visibilityType}" value='WORLD' /> World</label>
			</div>
		</div>

		<div class="form-group" th:if="${showPublishDate}">
			<label>Publish:</label> <label class="radio-inline"> <input
				type='radio' name="publishDateFlag" value='0' th:checked="${post.scheduled==null}"/> Immediately
			</label> <label class="radio-inline"> <input type='radio'
				name="publishDateFlag" value='1' th:checked="${post.scheduled!=null}"/> Pick a time
			</label>
			<div id="localPublishDate">
				<input class="form-control" name="localPublishDate" type="datetime-local" th:value="${localPublishDate}"/>
			</div>
		</div>		

		
		<div class="form-group" th:if="${showCommentsAllowed}">
			<label>Allow Comments:</label> <label class="radio-inline"> <input
				type='radio' th:field='*{commentsAllowed}' value='1' /> Yes
			</label> <label class="radio-inline"> <input type='radio'
				th:field='*{commentsAllowed}' value='0' /> No
			</label>
		</div>
		
		<div class="form-group">
			<label for="tagsString">Tags</label> <input class="form-control"
				id="tagsString" name="tagsString" size="50" type="text"
				th:value="${isEdit?tagsString:''}"
				placeholder="Comma or space delimited" />
		</div>
	</div>
	
	<script th:fragment="post_options_JS">
	/*<![CDATA[*/
	if ($('[name=localPublishDate]').val()=="") {
		$('[name=localPublishDate]').hide();
	} else {
		$('[name=localPublishDate]').show();
	}
	$('[name=publishDateFlag]').on('change',function(){
		if ($(this).val()==1) {
			//Pick Date
			$('[name=localPublishDate]').show();
		} else {
			// Immediate
			$('[name=localPublishDate]').hide();
		}
	});
	/*]]>*/
	</script>
  
  </body>
</html>